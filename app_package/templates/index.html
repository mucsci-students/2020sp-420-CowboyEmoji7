<!-- Contains display information for current state of data -->
{% extends 'base.html' %}

{% block elements %}

{% if classes|length < 1 %}
<div id="noClasses">No Classes Added</div>
{% else %}

{% for class in classes %}

<!-- No matter what IntelliSense tries to tell you, the moustaches in the next line are not errors. -->
<div id="{{ class.name }}" class="draggable Class non-activeEdit" onmouseover="bringForward('{{ class.name }}')" style="top: {{ class.y }}px; left: {{ class.x }}px;">
    <div id="DeleteClass">
        <form action="/delete/" method="POST">
            <button type="submit" id="DeleteClass" class="btn" name="delete" value="{{ class.name }}" onclick="return confirm('Are you sure you want to delete this class?')"><i class="fa fa-close"></i></button>
        </form>
    </div>
    <div class="EditClass">
        <button class="EditButton" onclick="editClass('{{ class.name }}')"><i class="fa fa-pencil" aria-hidden="true"></i></button>
    </div>
    <form action="/manipCharacteristics/" method="POST">
        <div class="SaveClass">
            <button type="submit" style="display:none;" id="attrsave-{{ class.name }}" class="SaveButton"><i class="fa fa-save" aria-hidden="true"></i></button>
        </div>
        <div class="className">
            <h2 class="className">
                <span  id="class-{{ class.name }}" style="display:block;">{{ class.name }}</span>
            </h2>
            <input type="hidden" name="field[ super ][class_name]" value="{{ class.name }}">
            <input type="hidden" name="field[ super ][new_name]" value="{{ class.name }}" id="classtext-{{ class.name }}">
            <input type="hidden" name="field[ super ][action]" value="RenameClass">
        </div>
        <div id="Attributes">
            <hr class="divider">
            <h4 class="headings">Attributes</h4>
            <ul class="attributeList">
                {% for attr in attributes %}
                    {% if attr.class_name == class.name %}
                    <li id="attr-{{ class.name }}-{{ attr.attribute }}">
                        <input type="hidden" name="field[{{ attr.attribute }}][class_name]" value="{{ class.name }}">
                        <input type="hidden" name="field[{{ attr.attribute }}][attribute]" value="{{ attr.attribute }}">
                        <input type="hidden" class="attrtext-{{ class.name }}" name="field[{{ attr.attribute }}][new_attribute]" value="{{ attr.attribute }}">
                        <span class="attrname-{{ class.name }}">{{ attr.attribute }}</span>

                        <label class="container container-{{ class.name }}" style="display:none;">
                            <input type="checkbox" class="attrdel-{{ class.name }}" name="field[{{ attr.attribute }}][action]" value="Delete">
                            <i class="fa fa-trash unchecked" title="Delete"></i>
                            <i class="fa fa-trash checked" title="Cancel"></i>                            
                        </label>
                    </li>
                    {% endif %}
                {% endfor %}
            </ul>
            <span id="addAttributeForm-{{ class.name }}" style="display: none; padding-top: 5px; padding-bottom: 5px;">
                <input type="hidden" name="field[ class ][class_name]" value="{{ class.name }}">
                <h4 class="headings">Add Attributes</h4>
                <ul class="addAttrs">
                    <li>
                        <input type="text" placeholder="getColor(), setColor(), ..." name="field[ class ][attrs]">
                        <input type="hidden" name="field[ class ][action]" value="Add">
                    </li>
                    <li>
                        <input type="radio" name="field[ class ][attr_type]" id="field" value="field">
                        <label for="field">Fields</label>
                        <input type="radio" name="field[ class ][attr_type]" id="method" value="method">
                        <label for="method">Methods</label>
                    </li>
                </ul>
            </span>
        </div>
    </form>
    <div id="Relationships-{{ class.name }}" class="RelationshipDiv" style="display: none;">
        <hr class="divider">
        <h4 class="headings">Relationships</h4>
        <ul class="relationshipList">
            <form id="relSelect" action="/manipRelationship/" method="POST">
                <input type="hidden" name="class_name" value="{{ class.name }}">
                <select id="custom-select-{{ class.name }}" multiple style="width: 70%; box-shadow: none;" onclick="document.getElementById('custom-select-{{ class.name }}').focus()" name="relationship" required>
                    {% for child in classes %}
                    <option class="relOptions" value="{{ child.name }}">{{ child.name }}</option>
                    {% endfor %}
                </select>
                <br>
                <input type="radio" name="rel_type" id="gen" value="gen">
                <label for="gen">Generalization</label>
                <br>
                <input type="radio" name="rel_type" id="agg" value="agg">
                <label for="agg">Aggregation</label>
                <br>
                <input type="radio" name="rel_type" id="comp" value="comp">
                <label for="comp">Composition</label>
                <br>
                <input type="radio" name="rel_type" id="none" value="none">
                <label for="none">None</label>
                <br>
                <button class="outline" type="submit" name="action" value="delete">Delete</button>
                <button class="outline" type="submit" name="action" value="add">Add</button>
            </form>
        </ul>
    </div>
</div>

{% endfor %}
{% endif %}
{% endblock %}